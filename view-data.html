<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>View All Data</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
<style>
body {
  background: linear-gradient(to right, #f8f9fa, #e9f7ef);
}
</style>
</head>
<body class="p-4">

<div class="container">
  <h2 class="mb-4 text-success fw-bold">All Saved Records</h2>
  <table class="table table-bordered table-striped table-hover">
    <thead class="table-success">
      <tr>
        <th>Registration No</th>
        <th>Admission Date</th>
        <th>Name</th>
        <th>Comments</th>
        <th>Full Address</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody id="dataTableBody"></tbody>
  </table>
  <a href="index.html" class="btn btn-primary">Back to Form</a>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script>
$(function(){
  let records = JSON.parse(localStorage.getItem('sevaFormDataList')) || [];
  let tbody = '';

  records.forEach((rec, index) => {
    tbody += `
      <tr>
        <td>${rec.registrationNo || ''}</td>
        <td>${rec.admissionDate || ''}</td>
        <td>${rec.name || ''}</td>
        <td>${rec.admissionComments || ''}</td>
        <td>${rec.address || ''}</td>
        <td>
          <button class="btn btn-info btn-sm viewBtn" data-index="${index}">View</button>
          <button class="btn btn-warning btn-sm printBtn" data-index="${index}">Print</button>
        </td>
      </tr>
    `;
  });

  $('#dataTableBody').html(tbody);

  // View button click
  $(document).on('click', '.viewBtn', function(){
    const index = $(this).data('index');
    localStorage.setItem('selectedRecord', index);
    window.location.href = 'summary-view.html';
  });

  // Print button click
  $(document).on('click', '.printBtn', function(){
    const index = $(this).data('index');
    localStorage.setItem('selectedRecord', index);
    window.open('print-template.html', '_blank');
  });
});
</script>
</body>
</html>
